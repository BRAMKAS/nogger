<ul class="pager" ng-click="col.zoomed = false" ng-show="col.zoomed">
    <li class="previous"><a href="#">&larr; back</a></li>
</ul>


<div class="col-md-3"
     ng-class="{'col-md-3': col.zoomed !== 'sysStatic', 'col-md-12 zoomed': col.zoomed === 'sysStatic'}"
     ng-click="col.zoomed = 'sysStatic'" ng-show="!col.zoomed || col.zoomed === 'sysStatic'">
    <section class="panel panel-default static-metrics">
        <div class="panel-heading">
            <h3 class="panel-title">System</h3>
        </div>
        <div class="panel-body">
            <ul class="list-group">
                <li class="list-group-item"
                    ng-class="{'list-group-item-success': data.health.t > 0 && data.health.t < 500, 'list-group-item-warning': data.health.t > 500, 'list-group-item-danger': data.health.t === null}">
                    <i class="fa fa-medkit"></i>
                    <b>Health:</b>
                    <span ng-show="data.health.t > 0 && data.health.t < 500">running</span>
                    <span ng-show="data.health.t > 500">slowly responding</span>
                    <span ng-show="data.health.t === null">down</span>
                </li>
                <li class="list-group-item">
                    <i class="fa fa-building-o"></i>
                    <b>Hostname:</b>
                    {{ data.metrics.static.hostname }}
                </li>
                <li class="list-group-item">
                    <i ng-show="data.metrics.static.platform && data.metrics.static.platform.indexOf('win') !== -1"
                       class="fa fa-windows"></i>
                    <i ng-show="data.metrics.static.platform && data.metrics.static.platform.indexOf('ubuntu') !== -1"
                       class="fa fa-linux"></i>
                    <i ng-hide="data.metrics.static.platform || data.metrics.static.platform.indexOf('win') !== -1 || data.metrics.static.platform.indexOf('ubuntu') !== -1"
                       class="fa fa-cubes"></i>
                    <b>Platform:</b>
                    <span class="no-wrap">{{ data.metrics.static.platform }} {{ data.metrics.static.arch }}</span>
                </li>
                <li class="list-group-item">
                    <img src="img/nodejs.png" width="14">
                    <b>Node:</b>
                    <span class="no-wrap">{{ data.metrics.static.nodeVersions }}</span>
                </li>
                <li class="list-group-item">
                    <i class="fa fa-clock-o"></i>
                    <b>Node uptime:</b>
                    <span class="no-wrap">{{ data.metrics.static.nodeStartTime | formatUptime }}</span>
                </li>
                <li class="list-group-item">
                    <i class="fa fa-clock-o"></i>
                    <b>System uptime:</b>
                    <span class="no-wrap">{{ data.metrics.static.osStartTime | formatUptime }}</span>
                </li>
            </ul>
        </div>
    </section>
</div>

<div class="col-md-3"
     ng-class="{'col-md-3': col.zoomed !== 'procMem', 'col-md-12 zoomed': col.zoomed === 'procMem'}"
     ng-click="col.zoomed = 'procMem'" ng-show="!col.zoomed || col.zoomed === 'procMem'">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Process Memory</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <gauge max-value="data.metrics.histogram.Memory.data[0][1][2]"
                       value="data.metrics.histogram.Memory.data[0][1][0]"></gauge>
                <div>
                    <span>{{(data.metrics.histogram.Memory.data[0][1][0] / data.metrics.histogram.Memory.data[0][1][2]) * 100 | number: 1}} %</span>
                    <small>
                        ({{data.metrics.histogram.Memory.data[0][1][0]}}/{{data.metrics.histogram.Memory.data[0][1][2]}}
                        MB)
                    </small>
                </div>
                <histogram values="data.metrics.histogram.Memory.data" highlight="0" min-value="0"
                           max-value="data.metrics.histogram.Memory.data[0][1][2]" show-yaxis="false"></histogram>
            </div>
        </div>
    </section>
</div>

<div class="col-md-3"
     ng-class="{'col-md-3': col.zoomed !== 'sysMem', 'col-md-12 zoomed': col.zoomed === 'sysMem'}"
     ng-click="col.zoomed = 'sysMem'" ng-show="!col.zoomed || col.zoomed === 'sysMem'">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">System Memory</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <gauge max-value="data.metrics.histogram.Memory.data[0][1][2]"
                       value="data.metrics.histogram.Memory.data[0][1][1]"></gauge>
                <div>
                    <span>{{(data.metrics.histogram.Memory.data[0][1][1] / data.metrics.histogram.Memory.data[0][1][2]) * 100 | number: 1}} %</span>
                    <small>
                        ({{data.metrics.histogram.Memory.data[0][1][1]}}/{{data.metrics.histogram.Memory.data[0][1][2]}}
                        MB)
                    </small>
                </div>
                <histogram values="data.metrics.histogram.Memory.data" highlight="1" min-value="0"
                           max-value="data.metrics.histogram.Memory.data[0][1][2]" show-yaxis="false"></histogram>
            </div>
        </div>
    </section>
</div>

<div class="col-md-3"
     ng-class="{'col-md-3': col.zoomed !== 'sysCpu', 'col-md-12 zoomed': col.zoomed === 'sysCpu'}"
     ng-click="col.zoomed = 'sysCpu'" ng-show="!col.zoomed || col.zoomed === 'sysCpu'">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">System CPU</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <gauge max-value="100" value="data.metrics.histogram.CPU.data[0][1]"></gauge>
                <div>
                    <span>{{data.metrics.histogram.CPU.data[0][1] | number: 1}} %</span>
                </div>
                <histogram values="data.metrics.histogram.CPU.data" highlight="1" min-value="0" max-value="100"
                           show-yaxis="false"></histogram>
            </div>
        </div>
    </section>
</div>


<div class="col-md-3" ng-if="hasStatics()"
     ng-class="{'col-md-3': col.zoomed !== 'static', 'col-md-12 zoomed': col.zoomed === 'static'}"
     ng-click="col.zoomed = 'static'" ng-show="!col.zoomed || col.zoomed === 'static'">
    <section class="panel panel-default static-metrics">
        <div class="panel-heading">
            <h3 class="panel-title">Static</h3>
        </div>
        <div class="panel-body">
            <ul class="list-group">
                <li class="list-group-item" ng-repeat="(key, value) in data.metrics.static"
                    ng-if="systemStatics.indexOf(key) === -1">
                    <i class="fa fa-pencil-square-o"></i>
                    <b>{{key}}:</b>
                    {{ value }}
                </li>
            </ul>
        </div>
    </section>
</div>

<div class="col-md-3" ng-repeat="(key, value) in data.metrics.counter"
     ng-class="{'col-md-3': col.zoomed !== 'counter' + key, 'col-md-12 zoomed': col.zoomed === 'counter' +key}"
     ng-click="col.zoomed = 'counter' + key" ng-show="!col.zoomed || col.zoomed === 'counter' + key">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{key}}</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <div>
                    <h1>
                        {{data.metrics.counter[key][0][1]}}
                        <i class="fa fa-long-arrow-down"
                           style="color: #dc1700;font-size: 0.5em;transform:rotate(-55deg);-webkit-transform:rotate(-55deg);"
                           ng-show="data.metrics.counter[key][0][1] < data.metrics.counter[key][data.metrics.counter[key].length -1][1]"></i>
                        <i class="fa fa-long-arrow-right" style="color: #a4a4a4;font-size: 0.5em;"
                           ng-show="data.metrics.counter[key][0][1] === data.metrics.counter[key][data.metrics.counter[key].length -1][1]"></i>
                        <i class="fa fa-long-arrow-up"
                           style="color: #008000;font-size: 0.5em;transform:rotate(55deg);-webkit-transform:rotate(55deg);"
                           ng-show="data.metrics.counter[key][0][1] > data.metrics.counter[key][data.metrics.counter[key].length -1][1]"></i>
                    </h1>
                </div>
                <histogram values="data.metrics.counter[key]" min-value="0" ticks="1"></histogram>
            </div>
        </div>
    </section>
</div>


<div class="col-md-3" ng-repeat="(key, value) in data.metrics.meter"
     ng-class="{'col-md-3': col.zoomed !== 'meter' + key, 'col-md-12 zoomed': col.zoomed === 'meter' +key}"
     ng-click="col.zoomed = 'meter' + key" ng-show="!col.zoomed || col.zoomed === 'meter' + key">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{key}}</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <div>
                    <h1>{{data.metrics.meter[key][0][1]}}</h1>
                </div>
                <histogram values="data.metrics.meter[key]" min-value="0" ticks="1"></histogram>
            </div>
        </div>
    </section>
</div>


<div class="col-md-3" ng-repeat="(key, value) in data.metrics.timer"
     ng-class="{'col-md-3': col.zoomed !== 'timer' + key, 'col-md-12 zoomed': col.zoomed === 'timer' +key}"
     ng-click="col.zoomed = 'timer' + key" ng-show="!col.zoomed || col.zoomed === 'timer' + key">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{key}}</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <div>
                    <h2>&Oslash;: {{data.metrics.timer[key][0][1][0] / 10}}ms</h2>
                    <h4>min: {{data.metrics.timer[key][0][1][2] / 10}}ms</h4>
                    <h4>max: {{data.metrics.timer[key][0][1][1] / 10}}ms</h4>
                </div>
                <histogram highlight="null" fill-between="0" values="data.metrics.timer[key]" min-value="0" ticks="1"
                           y-tick-post-fix="'ms'" y-tick-mult="0.1"></histogram>
            </div>
        </div>
    </section>
</div>


<div class="col-md-3" ng-repeat="(key, value) in data.metrics.histogram" ng-if="key !== 'CPU' && key !== 'Memory'"
     ng-class="{'col-md-3': col.zoomed !== 'histogram' + key, 'col-md-12 zoomed': col.zoomed === 'histogram' +key}"
     ng-click="col.zoomed = 'histogram' + key" ng-show="!col.zoomed || col.zoomed === 'histogram' + key">
    <section class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{key}}</h3>
        </div>
        <div class="panel-body">
            <div class="top-stats-panel chart">
                <div ng-if="value.data[0][1].length > 1">
                    <pie values="value.data[0][1]" labels="value.labels"></pie>
                </div>
                <histogram values="value.data" highlight="null"></histogram>
            </div>
        </div>
    </section>
</div>